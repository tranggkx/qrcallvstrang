<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thanh toan QR</title>
  <link rel="preconnect" href="https://img.vietqr.io">
  <style>
    :root{
      --bg:#020617;
      --card:#0b1120;
      --muted:#9ca3af;
      --ink:#e5e7eb;
      --border:#1f2937;
      --brand:#059669;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:"Segoe UI",Roboto,Arial,sans-serif;
      background:radial-gradient(circle at top,#111827 0,#020617 55%);
      color:var(--ink);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .wrap{max-width:980px;width:100%;}
    .card{
      background:var(--card);
      border-radius:24px;
      padding:32px 28px 28px;
      border:1px solid rgba(148,163,184,.2);
      box-shadow:0 30px 70px rgba(0,0,0,.6);
    }
    .title{
      text-align:center;
      font-size:24px;
      font-weight:700;
      margin-bottom:24px;
    }
    .grid{
      display:grid;
      grid-template-columns:minmax(280px,420px) minmax(260px,320px);
      gap:24px;
    }
    @media(max-width:900px){.grid{grid-template-columns:1fr;}}

    .qr-box{
      background:#020617;
      border-radius:18px;
      border:1px dashed var(--border);
      height:360px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .qr-box img{max-width:95%;max-height:95%;}
    .qr-placeholder{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--muted);
    }

    .info-row{
      display:grid;
      grid-template-columns:auto 1fr auto;
      align-items:center;
      gap:12px;
      margin-bottom:10px;
    }
    .info-label{color:var(--muted);}
    .info-value{text-align:right;}

    .btn-copy{
      padding:6px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#020617;
      color:var(--ink);
      cursor:pointer;
    }

    .action-row{
      margin-top:20px;
      display:flex;
      gap:12px;
    }
    .amount-input{
      flex:1;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#020617;
      color:var(--ink);
    }
    .btn-primary{
      padding:12px 18px;
      border-radius:999px;
      border:none;
      background:linear-gradient(135deg,#22c55e,#16a34a);
      color:#ecfdf5;
      font-weight:600;
      cursor:pointer;
    }
  </style>
</head>

<body>
<div class="wrap">
  <div class="card">
    <div class="title">Thanh toan QR de goi video</div>

    <div class="grid">

      <!-- QR -->
      <div class="qr-box">
        <img id="qrImage" style="display:none">
        <div id="qrPlaceholder" class="qr-placeholder">QR se hien thi o day</div>
      </div>

      <!-- INFO -->
      <div>
        <div class="info-row">
          <div class="info-label">Ngan hang:</div>
          <div id="bankName" class="info-value">OCB</div>
          <button class="btn-copy" data-copy="bankName">Copy</button>
        </div>

        <div class="info-row">
          <div class="info-label">So TK:</div>
          <div id="accountNumber" class="info-value">—</div>
          <button class="btn-copy" data-copy="accountNumber">Copy</button>
        </div>

        <div class="info-row">
          <div class="info-label">So tien:</div>
          <div id="amountText" class="info-value">—</div>
          <button class="btn-copy" data-copy="amountText">Copy</button>
        </div>

        <div class="info-row">
          <div class="info-label">Noi dung:</div>
          <div id="descriptionText" class="info-value">—</div>
          <button class="btn-copy" data-copy="descriptionText">Copy</button>
        </div>

        <div class="action-row">
          <input id="amountInput" class="amount-input" placeholder="Nhap so tien (VND)">
          <button id="btnCreate" class="btn-primary">Tao QR</button>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
const BANK_CODE = "OCB";

const ACCOUNT_LIST = [
  "0030104444444444",
  "0185101123123123"
];

const ACCOUNT_NAME = "LE THI TRANG";

const amountInput = document.getElementById("amountInput");
const amountText = document.getElementById("amountText");
const descriptionText = document.getElementById("descriptionText");
const accountNumberEl = document.getElementById("accountNumber");
const qrImage = document.getElementById("qrImage");
const qrPlaceholder = document.getElementById("qrPlaceholder");
const btnCreate = document.getElementById("btnCreate");

function formatCurrency(v){
  return Number(v).toLocaleString("vi-VN");
}

function getAmount(){
  return Number(amountInput.value.replace(/[^\d]/g,""));
}

amountInput.addEventListener("input",()=>{
  const raw = amountInput.value.replace(/[^\d]/g,"");
  amountInput.value = raw ? formatCurrency(raw) : "";
});

const ADDINFO_POOL = ["Cafe","Tra da","An toi","An dem","Moi cafe","Nuoc ngot","ck","lixi"];

function randomDesc(){
  return ADDINFO_POOL[Math.floor(Math.random()*ADDINFO_POOL.length)];
}

function randomAccount(){
  return ACCOUNT_LIST[Math.floor(Math.random()*ACCOUNT_LIST.length)];
}

function buildQr(account, amount, desc){
  const base = `https://img.vietqr.io/image/${BANK_CODE}-${account}-qr_only.png`;
  const p = new URLSearchParams({
    amount,
    addInfo: desc,
    accountName: ACCOUNT_NAME
  });
  return `${base}?${p.toString()}`;
}

btnCreate.onclick = ()=>{
  const amount = getAmount();
  if(!amount) return alert("Nhap so tien hop le");

  const acc = randomAccount();
  const desc = randomDesc();

  accountNumberEl.textContent = acc;
  amountText.textContent = formatCurrency(amount)+" VND";
  descriptionText.textContent = desc;

  qrImage.src = buildQr(acc, amount, desc);
  qrImage.style.display = "block";
  qrPlaceholder.style.display = "none";
};

document.querySelectorAll(".btn-copy").forEach(b=>{
  b.onclick = ()=>{
    const id = b.dataset.copy;
    const t = document.getElementById(id).textContent;
    if(t==="—") return;
    navigator.clipboard.writeText(t);
    b.textContent="Da copy";
    setTimeout(()=>b.textContent="Copy",800);
  }
});
</script>
</body>
</html>